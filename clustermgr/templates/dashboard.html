{% extends "base.html" %}
{% block content %}

  <h2 class="page-header">Dashboard</h2>

      <!-- provider info box -->
      <div class="col-xs-12 col-sm-6 col-md-3">
          <div class="panel panel-info">
              <div class="bg-success"><b>Gluu Servers</b></div>
              <div class="panel-heading">
                  
                  <div class="row">
                      <div class="col-xs-3">
                          
                          <h1><i class="glyphicon glyphicon-hdd"></i></h1>
                      </div>
                      <div class="col-xs-9 text-right">
                          <h3>{{ data.gluu_server }} <br> <small>Server</small></h3>
                      </div>
                  </div>
              </div>
              <a href="{{ url_for('index.edit_ldap_server', server_id=-1) }}" class="text-info">
                  <div class="panel-body">
                      <span class="pull-left">Add LDAP Server</span>
                      <span class="pull-right"><i class="glyphicon glyphicon-circle-arrow-right"></i></span>
                      <div class="clearfix"></div>
                  </div>
              </a>
          </div>
      </div>
 
      <!-- provider info box -->
      <div class="col-xs-12 col-sm-6 col-md-3">
          <div class="panel panel-info">
              <div class="bg-success"><b>Non Gluu Servers</b></div>
              <div class="panel-heading">
                  <div class="row">
                      
                      <div class="col-xs-3">
                          
                          <h1><i class="glyphicon glyphicon-download-alt"></i></h1>
                      </div>
                      <div class="col-xs-9 text-right">
                          <h3>{{data.nongluu_server}} <br> <small>Server</small></h3>
                      </div>
                  </div>
              </div>
              <a href="{{ url_for('index.install_ldap_server') }}" class="text-info">
                  <div class="panel-body">
                      <span class="pull-left">Install Symas LDAP Server</span>
                      <span class="pull-right"><i class="glyphicon glyphicon-circle-arrow-right"></i></span>
                      <div class="clearfix"></div>
                  </div>
              </a>
          </div>
      </div>

  {% if data.ldapservers %}
      <table id="servers" class="table table-bordered">
        <thead>
          <tr>
            <th>Server ID</th>
            <th>Hostname</th>
            <th>IP Address</th>
            <th>Gluu Server</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for server in data.ldapservers %}
          <tr {% if server.id == data.pr_server %} class="success" {% endif %}>
            <td>{{ server.id }}</td>
            <td>{{ server.hostname }}</td>
            <td>{{ server.ip }}</td>
            <td>{% if server.gluu_server %} <span class="glyphicon glyphicon-ok"></span>{% endif %}</td>
            
            <td>
  
                <a class="btn btn-default btn-xs" href="{{ url_for('index.edit_ldap_server', server_id=server.id) }}">Edit</a>
                <a class="btn btn-danger btn-xs" href="{{ url_for('index.remove_server', server_id=server.id) }}" data-target="#confirm-delete">Remove</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
    
    



{% endblock %}





{% block js %}
<script>
    $('#remove_alert_modal').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget);
        var server_id = button.data('serverid');
        var hostname = button.data('hostname');
        var remove_server_url = '{{ url_for("index.remove_server", server_id=9999) }}';
        remove_server_url = remove_server_url.replace('9999', server_id);
        var modal = $(this)
        modal.find('.modal-title').text('Remove ' + hostname);
        $('#remove_url').attr('href', remove_server_url);
    });
</script>
{% endblock %}

